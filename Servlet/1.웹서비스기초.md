## 1. 웹 서비스 기초

### 1. 서블릿 컨테이너
- 엄밀하게 말해 웹 어플리케이션 서버```(aka. WAS)```는 ```Java EE(Java platform Enterprise Edition)``` 명세를 만족시키는 자바 구현체를 의미하지만,
<br/> 웹 프로그래밍을 위한 미들웨어라는 개념이 일반화 되면서 자바 이외의 프로그래밍 언어로 작성한 서버도 비슷한 역할을 하면 웹 어플리케이션 서버라고 부른다.
- Java EE 가 많은 부분을 포용하려다 보니, 명세 및 구현체가 지나치게 무거워지고 웹 서비스 구현 방식도 필요 이상으로 복잡해졌다는 연유로 스프링 등을 필두로 여러 경량 프레임워크가 인기를 얻었다.
- 하지만 경량 프레임워크도 Java EE 정의 중 웹 어플리케이션 기술위에서 동작하는 것이 일반적이며, 이 기술의 구현체가 이 책에서 살펴볼 서블릿 컨테이너이다.

- 아파치 톰캣, 제티, 그리즐리 등은 서블릿 컨테이너로 현재 널리 사용되고 있다.
- 서블릭 컨테이너의 주요 목표는 서블릿을 동작시키는 데 있다. 따라서 서블릿이 어떤 방식으로 동작하는지 이해하면 서블릿 컨테이너가 제공 해야하는 기능을 역으로 유추할 수 있다.
- 그리고 이런 서블릿의 목적은 HTTP 프로토콜을 사용해 자바로 웹 서비스를 제공하는 것이다.

### 2. HTTP 프로토콜의 실제

#### 아파치 TCPMon ( download: https://archive.apache.org/dist/ws/tcpmon/1.0/tcpmon-1.0-bin.zip )
```bash
# cmd

## 1. 아래 경로(zip 파일 다운로드 후 압축을 푼..)에서 tcpmon.bat 파일 실행 
C:\Users\yjey\Downloads\tcpmon-1.0-bin\tcpmon-1.0-bin\build> tcpmon.bat ## <-- press enter
## 2. 화면에 TCPMon GUI가 노출된다.   
```

- ```하기의 절차를 통해 특정 웹 서버 "www.naver.com" 에 보낸 요청을 가로채 보는 예제```
1. TCPMon GUI 에서 [Listen Port]로 지정된 포트 8000번을 이용해 listen(요청)을 대기
2. 포트 8000번을 통해 받은 요청을 그대로 복제한 후, 포트 80번을 이용해 [Host]로 지정된 ```www.naver.com``` 서버로 전송
3. 그리고 ```www.naver.com``` 서버가 반환한 결과를 받아 "Waiting for Connection"이라 표시된 하단 창에 표시
4. 브라우저를 열고 주소창에 http://localhost:8000 입력 > 네이버 메인 화면 표시

#### HTTP 프로토콜의 간략한 소개
- 기술적인 측면에서 웹 서비스는 HTTP 프로토콜로 메시지를 전송하는 시스템이라 할 수 있다.
- 더 자세히 말하면, 클라이언트가 보낸 메시지는 HTTP 프로토콜에 실려 서블릿 컨테이너에 전송된다.
- 전송된 메시지를 서버 측에서 재구성하려면 서블릿 컨테이너는 반드시 HTTP 프로토콜 해석 기계를 구하여야한다.

**하나의 HTTP 메시지를 특정하는 방법**
```text
1. 다음에 보낼 데이터의 크기를 미리 전송하여 수신측에게 어디까지 읽어야 하는지를 알려주는 방식
2. 종료 기호를 서로 약속한 후 해당 기호로 메시지의 끝을 표시하는 방식
```
- HTTP 프로토콜에서는 ```Content-Length```라는 특별한 값의 메시지 헤더를 사용하여 1번 방식을 지원
- 초기 HTTP 프로토콜은 종료 기호를 사용하여 메시지의 끝을 나타내었다.

**메시지의 내용을 서로 구분하는 행 구분자**